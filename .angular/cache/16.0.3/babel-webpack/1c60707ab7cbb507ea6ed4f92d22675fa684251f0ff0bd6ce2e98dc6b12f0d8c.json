{"ast":null,"code":"import { inject } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { IaService } from 'src/app/services/ia.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nconst _c0 = [\"scrollMe\"];\nfunction HelpSupportComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const message_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(message_r3.type);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", message_r3.message, \" \");\n  }\n}\nfunction HelpSupportComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"div\");\n    i0.ɵɵtext(2, \"...\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(\"bot\");\n  }\n}\nclass HelpSupportComponent {\n  constructor() {\n    this.isOpen = false;\n    this.loading = false;\n    this.iaService = inject(IaService);\n    this.messages = [];\n    this.chatForm = new FormGroup({\n      message: new FormControl('', [Validators.required])\n    });\n    this.queryLLM = question => {\n      this.iaService.answerQuestion(question).subscribe(response => {\n        this.loading = false;\n        const {\n          content\n        } = response;\n        this.iaService.setState({\n          response: content,\n          loading: false\n        });\n      });\n    };\n    this.messages.push({\n      type: 'bot',\n      message: 'Hola, soy tu agente de apoyo. ¿Te puedo ayudar en algo?'\n    });\n  }\n  openSupportPopup() {\n    this.isOpen = !this.isOpen;\n  }\n  sendMessage() {\n    const sentMessage = this.chatForm.value.message;\n    this.loading = true;\n    this.messages.push({\n      type: 'user',\n      message: sentMessage\n    });\n    this.queryLLM(sentMessage);\n    this.chatForm.reset();\n    this.scrollToBottom();\n  }\n  scrollToBottom() {\n    setTimeout(() => {\n      try {\n        this.myScrollContainer.nativeElement.scrollTop = this.myScrollContainer.nativeElement.scrollHeight + 500;\n      } catch (err) {}\n    }, 150);\n  }\n}\nHelpSupportComponent.ɵfac = function HelpSupportComponent_Factory(t) {\n  return new (t || HelpSupportComponent)();\n};\nHelpSupportComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HelpSupportComponent,\n  selectors: [[\"app-help-support\"]],\n  viewQuery: function HelpSupportComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.myScrollContainer = _t.first);\n    }\n  },\n  decls: 17,\n  vars: 6,\n  consts: [[\"id\", \"helpdesk\"], [\"id\", \"helpdesk-popup-button\", 3, \"click\"], [\"id\", \"helpdesk-popup\"], [\"id\", \"helpdesk-popup-header\"], [\"id\", \"helpdesk-popup-close-button\", 3, \"click\"], [\"id\", \"helpdesk-popup-body\"], [1, \"messages\"], [\"scrollMe\", \"\"], [\"class\", \"message\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"message\", \"style\", \"width: 100%; display: block\", 4, \"ngIf\"], [\"id\", \"helpdesk-popup-footer\", 3, \"formGroup\"], [\"formControlName\", \"message\", \"type\", \"text\", \"id\", \"helpdesk-popup-input\", \"placeholder\", \"Escribe aca tu pregunta...\"], [\"id\", \"helpdesk-popup-submit-button\", 3, \"disabled\", \"click\"], [1, \"message\"], [1, \"message\", 2, \"width\", \"100%\", \"display\", \"block\"]],\n  template: function HelpSupportComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function HelpSupportComponent_Template_button_click_1_listener() {\n        return ctx.openSupportPopup();\n      });\n      i0.ɵɵtext(2, \" en que te puedo ayudar? \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3);\n      i0.ɵɵtext(5, \" Robo-Z helpdesk \");\n      i0.ɵɵelementStart(6, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function HelpSupportComponent_Template_button_click_6_listener() {\n        return ctx.openSupportPopup();\n      });\n      i0.ɵɵtext(7, \" Close \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(8, \"div\", 5)(9, \"div\", 6, 7);\n      i0.ɵɵtemplate(11, HelpSupportComponent_div_11_Template, 3, 3, \"div\", 8);\n      i0.ɵɵtemplate(12, HelpSupportComponent_div_12_Template, 3, 2, \"div\", 9);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(13, \"form\", 10);\n      i0.ɵɵelement(14, \"input\", 11);\n      i0.ɵɵelementStart(15, \"button\", 12);\n      i0.ɵɵlistener(\"click\", function HelpSupportComponent_Template_button_click_15_listener() {\n        return ctx.sendMessage();\n      });\n      i0.ɵɵtext(16, \" Enviar \");\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵstyleProp(\"display\", ctx.isOpen ? \"block\" : \"none\");\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngForOf\", ctx.messages);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.loading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.chatForm);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", !ctx.chatForm.valid);\n    }\n  },\n  dependencies: [i1.NgForOf, i1.NgIf, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName],\n  styles: [\"@import url(https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap)[_ngcontent-%COMP%];#helpdesk[_ngcontent-%COMP%] {\\n  font-family: \\\"Roboto\\\", sans-serif;\\n}\\n#helpdesk[_ngcontent-%COMP%]   #helpdesk-popup-button[_ngcontent-%COMP%] {\\n  position: fixed;\\n  bottom: 20px;\\n  right: 20px;\\n  padding: 10px 20px;\\n  background-color: #333;\\n  color: #ffffff;\\n  border: none;\\n  border-radius: 5px;\\n  cursor: pointer;\\n  font-size: 14px;\\n  z-index: 1000;\\n}\\n#helpdesk[_ngcontent-%COMP%]   #helpdesk-popup[_ngcontent-%COMP%] {\\n  position: fixed;\\n  bottom: 40px;\\n  right: 20px;\\n  width: 300px;\\n  height: 50vh;\\n  min-height: 450px;\\n  background-color: white;\\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\\n  border-radius: 5px;\\n  z-index: 1000;\\n  display: none;\\n}\\n#helpdesk[_ngcontent-%COMP%]   #helpdesk-popup[_ngcontent-%COMP%]   #helpdesk-popup-header[_ngcontent-%COMP%] {\\n  background-color: #333;\\n  color: white;\\n  font-size: 18px;\\n  padding: 10px;\\n  border-top-left-radius: 5px;\\n  border-top-right-radius: 5px;\\n}\\n#helpdesk[_ngcontent-%COMP%]   #helpdesk-popup[_ngcontent-%COMP%]   #helpdesk-popup-header[_ngcontent-%COMP%]   #helpdesk-popup-close-button[_ngcontent-%COMP%] {\\n  float: right;\\n  border: none;\\n  background-color: transparent;\\n  color: #fff;\\n  font-size: 14px;\\n  cursor: pointer;\\n}\\n#helpdesk[_ngcontent-%COMP%]   #helpdesk-popup[_ngcontent-%COMP%]   #helpdesk-popup-body[_ngcontent-%COMP%] {\\n  height: calc(100% - 133px);\\n  padding: 10px;\\n}\\n#helpdesk[_ngcontent-%COMP%]   #helpdesk-popup[_ngcontent-%COMP%]   #helpdesk-popup-footer[_ngcontent-%COMP%] {\\n  background-color: #333;\\n  color: white;\\n  font-size: 14px;\\n  padding: 10px;\\n  border-bottom-left-radius: 5px;\\n  border-bottom-right-radius: 5px;\\n}\\n#helpdesk[_ngcontent-%COMP%]   #helpdesk-popup[_ngcontent-%COMP%]   #helpdesk-popup-footer[_ngcontent-%COMP%]   #helpdesk-popup-input[_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 10px;\\n  border: 1px solid #fff;\\n  border-radius: 5px 5px 0 0;\\n  box-sizing: border-box;\\n  font-size: 14px;\\n  color: #333;\\n}\\n#helpdesk[_ngcontent-%COMP%]   #helpdesk-popup[_ngcontent-%COMP%]   #helpdesk-popup-footer[_ngcontent-%COMP%]   #helpdesk-popup-submit-button[_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 10px;\\n  background-color: #2ca1da;\\n  color: #fff;\\n  border: none;\\n  border-radius: 0 0 5px 5px;\\n  cursor: pointer;\\n  font-size: 14px;\\n}\\n#helpdesk[_ngcontent-%COMP%]   #helpdesk-popup[_ngcontent-%COMP%]   .messages[_ngcontent-%COMP%] {\\n  height: 100%;\\n  overflow: auto;\\n}\\n#helpdesk[_ngcontent-%COMP%]   #helpdesk-popup[_ngcontent-%COMP%]   .messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%] {\\n  display: flow-root;\\n  width: 100%;\\n}\\n#helpdesk[_ngcontent-%COMP%]   #helpdesk-popup[_ngcontent-%COMP%]   .messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .bot[_ngcontent-%COMP%] {\\n  background-color: #333;\\n  color: white;\\n  padding: 10px;\\n  border-radius: 5px;\\n  margin-bottom: 10px;\\n  display: inline-block;\\n  max-width: 80%;\\n}\\n#helpdesk[_ngcontent-%COMP%]   #helpdesk-popup[_ngcontent-%COMP%]   .messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%] {\\n  border: 0.5px solid #333;\\n  background-color: #fff;\\n  color: #333;\\n  padding: 10px;\\n  border-radius: 5px;\\n  margin-bottom: 10px;\\n  display: inline-block;\\n  max-width: 80%;\\n  text-align: right;\\n  float: right;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2hhcmVkL2hlbHAtc3VwcG9ydC9oZWxwLXN1cHBvcnQuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7RUFDSSxpQ0FBQTtBQUFKO0FBRUk7RUFDSSxlQUFBO0VBQ0EsWUFBQTtFQUNBLFdBQUE7RUFDQSxrQkFBQTtFQUNBLHNCQUFBO0VBQ0EsY0FBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtFQUNBLGVBQUE7RUFDQSxlQUFBO0VBQ0EsYUFBQTtBQUFSO0FBR0k7RUFDSSxlQUFBO0VBQ0EsWUFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsWUFBQTtFQUNBLGlCQUFBO0VBQ0EsdUJBQUE7RUFDQSx1Q0FBQTtFQUNBLGtCQUFBO0VBQ0EsYUFBQTtFQUNBLGFBQUE7QUFEUjtBQUdRO0VBQ0ksc0JBQUE7RUFDQSxZQUFBO0VBQ0EsZUFBQTtFQUNBLGFBQUE7RUFDQSwyQkFBQTtFQUNBLDRCQUFBO0FBRFo7QUFHWTtFQUNJLFlBQUE7RUFDQSxZQUFBO0VBQ0EsNkJBQUE7RUFDQSxXQUFBO0VBQ0EsZUFBQTtFQUNBLGVBQUE7QUFEaEI7QUFLUTtFQUNJLDBCQUFBO0VBQ0EsYUFBQTtBQUhaO0FBTVE7RUFDSSxzQkFBQTtFQUNBLFlBQUE7RUFDQSxlQUFBO0VBQ0EsYUFBQTtFQUNBLDhCQUFBO0VBQ0EsK0JBQUE7QUFKWjtBQU1ZO0VBQ0ksV0FBQTtFQUNBLGFBQUE7RUFDQSxzQkFBQTtFQUNBLDBCQUFBO0VBQ0Esc0JBQUE7RUFDQSxlQUFBO0VBQ0EsV0FBQTtBQUpoQjtBQU9ZO0VBQ0ksV0FBQTtFQUNBLGFBQUE7RUFDQSx5QkFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsMEJBQUE7RUFDQSxlQUFBO0VBQ0EsZUFBQTtBQUxoQjtBQVNRO0VBQ0ksWUFBQTtFQUNBLGNBQUE7QUFQWjtBQVNZO0VBQ0ksa0JBQUE7RUFDQSxXQUFBO0FBUGhCO0FBU2dCO0VBQ0ksc0JBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtFQUNBLGtCQUFBO0VBQ0EsbUJBQUE7RUFDQSxxQkFBQTtFQUNBLGNBQUE7QUFQcEI7QUFVZ0I7RUFDSSx3QkFBQTtFQUNBLHNCQUFBO0VBQ0EsV0FBQTtFQUNBLGFBQUE7RUFDQSxrQkFBQTtFQUNBLG1CQUFBO0VBQ0EscUJBQUE7RUFDQSxjQUFBO0VBQ0EsaUJBQUE7RUFDQSxZQUFBO0FBUnBCIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCB1cmwoXCJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PVJvYm90bzp3Z2h0QDQwMDs3MDAmZGlzcGxheT1zd2FwXCIpO1xyXG5cclxuI2hlbHBkZXNrIHtcclxuICAgIGZvbnQtZmFtaWx5OiBcIlJvYm90b1wiLCBzYW5zLXNlcmlmO1xyXG5cclxuICAgICNoZWxwZGVzay1wb3B1cC1idXR0b24ge1xyXG4gICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgICAgICBib3R0b206IDIwcHg7XHJcbiAgICAgICAgcmlnaHQ6IDIwcHg7XHJcbiAgICAgICAgcGFkZGluZzogMTBweCAyMHB4O1xyXG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMzMzM7XHJcbiAgICAgICAgY29sb3I6ICNmZmZmZmY7XHJcbiAgICAgICAgYm9yZGVyOiBub25lO1xyXG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xyXG4gICAgICAgIHotaW5kZXg6IDEwMDA7XHJcbiAgICB9XHJcblxyXG4gICAgI2hlbHBkZXNrLXBvcHVwIHtcclxuICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICAgICAgYm90dG9tOiA0MHB4O1xyXG4gICAgICAgIHJpZ2h0OiAyMHB4O1xyXG4gICAgICAgIHdpZHRoOiAzMDBweDtcclxuICAgICAgICBoZWlnaHQ6IDUwdmg7XHJcbiAgICAgICAgbWluLWhlaWdodDogNDUwcHg7XHJcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICAgICAgYm94LXNoYWRvdzogMCAwIDEwcHggcmdiYSgwLCAwLCAwLCAwLjUpO1xyXG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgICAgICB6LWluZGV4OiAxMDAwO1xyXG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XHJcblxyXG4gICAgICAgICNoZWxwZGVzay1wb3B1cC1oZWFkZXIge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzO1xyXG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XHJcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMThweDtcclxuICAgICAgICAgICAgcGFkZGluZzogMTBweDtcclxuICAgICAgICAgICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogNXB4O1xyXG4gICAgICAgICAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogNXB4O1xyXG5cclxuICAgICAgICAgICAgI2hlbHBkZXNrLXBvcHVwLWNsb3NlLWJ1dHRvbiB7XHJcbiAgICAgICAgICAgICAgICBmbG9hdDogcmlnaHQ7XHJcbiAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcclxuICAgICAgICAgICAgICAgIGNvbG9yOiAjZmZmO1xyXG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjaGVscGRlc2stcG9wdXAtYm9keSB7XHJcbiAgICAgICAgICAgIGhlaWdodDogY2FsYygxMDAlIC0gMTMzcHgpO1xyXG4gICAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI2hlbHBkZXNrLXBvcHVwLWZvb3RlciB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMzMzM7XHJcbiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xyXG4gICAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgICAgICAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiA1cHg7XHJcbiAgICAgICAgICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiA1cHg7XHJcblxyXG4gICAgICAgICAgICAjaGVscGRlc2stcG9wdXAtaW5wdXQge1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2ZmZjtcclxuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweCA1cHggMCAwO1xyXG4gICAgICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcclxuICAgICAgICAgICAgICAgIGNvbG9yOiAjMzMzO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAjaGVscGRlc2stcG9wdXAtc3VibWl0LWJ1dHRvbiB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmNhMWRhO1xyXG4gICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7XHJcbiAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XHJcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwIDAgNXB4IDVweDtcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLm1lc3NhZ2VzIHtcclxuICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcclxuXHJcbiAgICAgICAgICAgIC5tZXNzYWdlIHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsb3ctcm9vdDtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG5cclxuICAgICAgICAgICAgICAgIC5ib3Qge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMzMzM7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgICAgICAgICAgICAgICAgIG1heC13aWR0aDogODAlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC51c2VyIHtcclxuICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDAuNXB4IHNvbGlkICMzMzM7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzMzMztcclxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgICAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDgwJTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcclxuICAgICAgICAgICAgICAgICAgICBmbG9hdDogcmlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});\nexport { HelpSupportComponent };","map":{"version":3,"names":["inject","FormControl","FormGroup","Validators","IaService","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵclassMap","message_r3","type","ɵɵtextInterpolate1","message","HelpSupportComponent","constructor","isOpen","loading","iaService","messages","chatForm","required","queryLLM","question","answerQuestion","subscribe","response","content","setState","push","openSupportPopup","sendMessage","sentMessage","value","reset","scrollToBottom","setTimeout","myScrollContainer","nativeElement","scrollTop","scrollHeight","err","selectors","viewQuery","HelpSupportComponent_Query","rf","ctx","ɵɵlistener","HelpSupportComponent_Template_button_click_1_listener","HelpSupportComponent_Template_button_click_6_listener","ɵɵtemplate","HelpSupportComponent_div_11_Template","HelpSupportComponent_div_12_Template","ɵɵelement","HelpSupportComponent_Template_button_click_15_listener","ɵɵstyleProp","ɵɵproperty","valid"],"sources":["C:\\IA\\front-bot-ia-vector\\src\\app\\shared\\help-support\\help-support.component.ts","C:\\IA\\front-bot-ia-vector\\src\\app\\shared\\help-support\\help-support.component.html"],"sourcesContent":["import { Component, ViewChild, inject } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { IaService } from 'src/app/services/ia.service';\r\n\r\nexport interface Message {\r\n  type: string;\r\n  message: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-help-support',\r\n  templateUrl: './help-support.component.html',\r\n  styleUrls: ['./help-support.component.scss']\r\n})\r\n\r\nexport class HelpSupportComponent {\r\n  isOpen = false;\r\n  loading = false;\r\n  iaService = inject(IaService);\r\n  messages: Message[] = [];\r\n  chatForm = new FormGroup({\r\n    message: new FormControl('', [Validators.required]),\r\n  });\r\n  @ViewChild('scrollMe') private myScrollContainer: any;\r\n\r\n  constructor() {\r\n    this.messages.push({\r\n      type: 'bot',\r\n      message: 'Hola, soy tu agente de apoyo. ¿Te puedo ayudar en algo?',\r\n    });\r\n  }\r\n\r\n  openSupportPopup() {\r\n    this.isOpen = !this.isOpen;\r\n  }\r\n\r\n  sendMessage() {\r\n    const sentMessage = this.chatForm.value.message!;\r\n    this.loading = true;\r\n    this.messages.push({\r\n      type: 'user',\r\n      message: sentMessage,\r\n    });\r\n    this.queryLLM(sentMessage);\r\n    this.chatForm.reset();\r\n    this.scrollToBottom();\r\n\r\n  }\r\n\r\n  scrollToBottom() {\r\n    setTimeout(() => {\r\n      try {\r\n        this.myScrollContainer.nativeElement.scrollTop =\r\n          this.myScrollContainer.nativeElement.scrollHeight + 500;\r\n      } catch (err) { }\r\n    }, 150);\r\n  }\r\n\r\n  queryLLM = (question: string) => {\r\n    this.iaService.answerQuestion(question).subscribe((response) => {\r\n      this.loading = false;\r\n      const { content } = response\r\n      this.iaService.setState({ response: content, loading: false });\r\n    })\r\n  }\r\n}\r\n","<div id=\"helpdesk\">\r\n    <button id=\"helpdesk-popup-button\" (click)=\"openSupportPopup()\">\r\n        en que te puedo ayudar?\r\n    </button>\r\n    <div id=\"helpdesk-popup\" [style.display]=\"isOpen ? 'block' : 'none'\">\r\n        <div id=\"helpdesk-popup-header\">\r\n            Robo-Z helpdesk\r\n            <button id=\"helpdesk-popup-close-button\" (click)=\"openSupportPopup()\">\r\n                Close\r\n            </button>\r\n        </div>\r\n        <div id=\"helpdesk-popup-body\">\r\n            <div class=\"messages\" #scrollMe>\r\n                <div *ngFor=\"let message of messages\" class=\"message\">\r\n                    <div [class]=\"message.type\">\r\n                        {{ message.message }}\r\n                    </div>\r\n                </div>\r\n                <div *ngIf=\"loading\" class=\"message\" style=\"width: 100%; display: block\">\r\n                    <div [class]=\"'bot'\">...</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <form id=\"helpdesk-popup-footer\" [formGroup]=\"chatForm\">\r\n            <input formControlName=\"message\" type=\"text\" id=\"helpdesk-popup-input\"\r\n                placeholder=\"Escribe aca tu pregunta...\" />\r\n            <button id=\"helpdesk-popup-submit-button\" [disabled]=\"!chatForm.valid\" (click)=\"sendMessage()\">\r\n                Enviar\r\n            </button>\r\n        </form>\r\n    </div>\r\n</div>"],"mappings":"AAAA,SAA+BA,MAAM,QAAQ,eAAe;AAC5D,SAASC,WAAW,EAAEC,SAAS,EAAEC,UAAU,QAAQ,gBAAgB;AACnE,SAASC,SAAS,QAAQ,6BAA6B;;;;;;;ICWvCC,EAAA,CAAAC,cAAA,cAAsD;IAE9CD,EAAA,CAAAE,MAAA,GACJ;IAAAF,EAAA,CAAAG,YAAA,EAAM;;;;IAFDH,EAAA,CAAAI,SAAA,GAAsB;IAAtBJ,EAAA,CAAAK,UAAA,CAAAC,UAAA,CAAAC,IAAA,CAAsB;IACvBP,EAAA,CAAAI,SAAA,GACJ;IADIJ,EAAA,CAAAQ,kBAAA,MAAAF,UAAA,CAAAG,OAAA,MACJ;;;;;IAEJT,EAAA,CAAAC,cAAA,cAAyE;IAChDD,EAAA,CAAAE,MAAA,UAAG;IAAAF,EAAA,CAAAG,YAAA,EAAM;;;IAAzBH,EAAA,CAAAI,SAAA,GAAe;IAAfJ,EAAA,CAAAK,UAAA,OAAe;;;ADVxC,MAMaK,oBAAoB;EAU/BC,YAAA;IATA,KAAAC,MAAM,GAAG,KAAK;IACd,KAAAC,OAAO,GAAG,KAAK;IACf,KAAAC,SAAS,GAAGnB,MAAM,CAACI,SAAS,CAAC;IAC7B,KAAAgB,QAAQ,GAAc,EAAE;IACxB,KAAAC,QAAQ,GAAG,IAAInB,SAAS,CAAC;MACvBY,OAAO,EAAE,IAAIb,WAAW,CAAC,EAAE,EAAE,CAACE,UAAU,CAACmB,QAAQ,CAAC;KACnD,CAAC;IAoCF,KAAAC,QAAQ,GAAIC,QAAgB,IAAI;MAC9B,IAAI,CAACL,SAAS,CAACM,cAAc,CAACD,QAAQ,CAAC,CAACE,SAAS,CAAEC,QAAQ,IAAI;QAC7D,IAAI,CAACT,OAAO,GAAG,KAAK;QACpB,MAAM;UAAEU;QAAO,CAAE,GAAGD,QAAQ;QAC5B,IAAI,CAACR,SAAS,CAACU,QAAQ,CAAC;UAAEF,QAAQ,EAAEC,OAAO;UAAEV,OAAO,EAAE;QAAK,CAAE,CAAC;MAChE,CAAC,CAAC;IACJ,CAAC;IAtCC,IAAI,CAACE,QAAQ,CAACU,IAAI,CAAC;MACjBlB,IAAI,EAAE,KAAK;MACXE,OAAO,EAAE;KACV,CAAC;EACJ;EAEAiB,gBAAgBA,CAAA;IACd,IAAI,CAACd,MAAM,GAAG,CAAC,IAAI,CAACA,MAAM;EAC5B;EAEAe,WAAWA,CAAA;IACT,MAAMC,WAAW,GAAG,IAAI,CAACZ,QAAQ,CAACa,KAAK,CAACpB,OAAQ;IAChD,IAAI,CAACI,OAAO,GAAG,IAAI;IACnB,IAAI,CAACE,QAAQ,CAACU,IAAI,CAAC;MACjBlB,IAAI,EAAE,MAAM;MACZE,OAAO,EAAEmB;KACV,CAAC;IACF,IAAI,CAACV,QAAQ,CAACU,WAAW,CAAC;IAC1B,IAAI,CAACZ,QAAQ,CAACc,KAAK,EAAE;IACrB,IAAI,CAACC,cAAc,EAAE;EAEvB;EAEAA,cAAcA,CAAA;IACZC,UAAU,CAAC,MAAK;MACd,IAAI;QACF,IAAI,CAACC,iBAAiB,CAACC,aAAa,CAACC,SAAS,GAC5C,IAAI,CAACF,iBAAiB,CAACC,aAAa,CAACE,YAAY,GAAG,GAAG;OAC1D,CAAC,OAAOC,GAAG,EAAE;IAChB,CAAC,EAAE,GAAG,CAAC;EACT;;AAzCW3B,oBAAoB,C;mBAApBA,oBAAoB;AAAA;AAApBA,oBAAoB,C;QAApBA,oBAAoB;EAAA4B,SAAA;EAAAC,SAAA,WAAAC,2BAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;;;;;;;;;;;;;MCfjCzC,EAAA,CAAAC,cAAA,aAAmB;MACoBD,EAAA,CAAA2C,UAAA,mBAAAC,sDAAA;QAAA,OAASF,GAAA,CAAAhB,gBAAA,EAAkB;MAAA,EAAC;MAC3D1B,EAAA,CAAAE,MAAA,gCACJ;MAAAF,EAAA,CAAAG,YAAA,EAAS;MACTH,EAAA,CAAAC,cAAA,aAAqE;MAE7DD,EAAA,CAAAE,MAAA,wBACA;MAAAF,EAAA,CAAAC,cAAA,gBAAsE;MAA7BD,EAAA,CAAA2C,UAAA,mBAAAE,sDAAA;QAAA,OAASH,GAAA,CAAAhB,gBAAA,EAAkB;MAAA,EAAC;MACjE1B,EAAA,CAAAE,MAAA,cACJ;MAAAF,EAAA,CAAAG,YAAA,EAAS;MAEbH,EAAA,CAAAC,cAAA,aAA8B;MAEtBD,EAAA,CAAA8C,UAAA,KAAAC,oCAAA,iBAIM;MACN/C,EAAA,CAAA8C,UAAA,KAAAE,oCAAA,iBAEM;MACVhD,EAAA,CAAAG,YAAA,EAAM;MAEVH,EAAA,CAAAC,cAAA,gBAAwD;MACpDD,EAAA,CAAAiD,SAAA,iBAC+C;MAC/CjD,EAAA,CAAAC,cAAA,kBAA+F;MAAxBD,EAAA,CAAA2C,UAAA,mBAAAO,uDAAA;QAAA,OAASR,GAAA,CAAAf,WAAA,EAAa;MAAA,EAAC;MAC1F3B,EAAA,CAAAE,MAAA,gBACJ;MAAAF,EAAA,CAAAG,YAAA,EAAS;;;MAxBQH,EAAA,CAAAI,SAAA,GAA2C;MAA3CJ,EAAA,CAAAmD,WAAA,YAAAT,GAAA,CAAA9B,MAAA,oBAA2C;MAS/BZ,EAAA,CAAAI,SAAA,GAAW;MAAXJ,EAAA,CAAAoD,UAAA,YAAAV,GAAA,CAAA3B,QAAA,CAAW;MAK9Bf,EAAA,CAAAI,SAAA,GAAa;MAAbJ,EAAA,CAAAoD,UAAA,SAAAV,GAAA,CAAA7B,OAAA,CAAa;MAKMb,EAAA,CAAAI,SAAA,GAAsB;MAAtBJ,EAAA,CAAAoD,UAAA,cAAAV,GAAA,CAAA1B,QAAA,CAAsB;MAGThB,EAAA,CAAAI,SAAA,GAA4B;MAA5BJ,EAAA,CAAAoD,UAAA,cAAAV,GAAA,CAAA1B,QAAA,CAAAqC,KAAA,CAA4B;;;;;;SDXrE3C,oBAAoB"},"metadata":{},"sourceType":"module","externalDependencies":[]}